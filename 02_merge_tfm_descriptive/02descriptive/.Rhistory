rm(list = ls())
gc()
library(dplyr)
library(tableone)
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv")
rm(list = ls())
gc()
library(dplyr)
library(data.table)
library(tableone)
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv")
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv",
drop = "V1")
birth$lbw <- 0
birth$lbw[birth$bwg<2500] <- 1
names(birth)
birth$parit_cat <- birth$parit
#summary(birth$parit[birth$parit>7 & birth$parit<200])
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat <- as.factor(birth$parit_cat)
birth$parit_cat[birth$parit>1 & !is.na(birth$parit)] <- 0
# birth$m_wg %>% sort(decreasing = TRUE) %>% head(100)
# summary(birth$parit_cat)
birth$m_wg_cat <- 0
birth$m_wg_cat[birth$m_wg<0] <- 1
birth$m_wg_cat[birth$m_wg>=0 & birth$m_wg<15] <- 2
birth$m_wg_cat[birth$m_wg>=15 & birth$m_wg<25] <- 3
birth$m_wg_cat[birth$m_wg>=25 & birth$m_wg<36] <- 4
birth$m_wg_cat[birth$m_wg>=36] <- 5
# summary(birth$m_wg_cat)
birth <- birth %>% select(-parit, -m_wg)
data <- birth
names(birth)
summary(birth)
data$sex <- data$sex - 1 # 1 is girl; 0 is boy
data$mrace <- as.factor(data$mrace)
data$m_edu <- as.factor(data$m_edu)
data$kotck <- as.factor(data$kotck)
rm(list = ls())
gc()
library(dplyr)
library(data.table)
library(tableone)
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv",
drop = "V1")
birth$lbw <- 0
birth$lbw[birth$bwg<2500] <- 1
names(birth)
birth$parit_cat <- birth$parit
#summary(birth$parit[birth$parit>7 & birth$parit<200])
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat <- as.factor(birth$parit_cat)
birth$parit_cat[birth$parit>1 & !is.na(birth$parit)] <- 0
# birth$m_wg %>% sort(decreasing = TRUE) %>% head(100)
# summary(birth$parit_cat)
birth$m_wg_cat <- 0
birth$m_wg_cat[birth$m_wg<0] <- 1
birth$m_wg_cat[birth$m_wg>=0 & birth$m_wg<15] <- 2
birth$m_wg_cat[birth$m_wg>=15 & birth$m_wg<25] <- 3
birth$m_wg_cat[birth$m_wg>=25 & birth$m_wg<36] <- 4
birth$m_wg_cat[birth$m_wg>=36] <- 5
# summary(birth$m_wg_cat)
birth <- birth %>% select(-parit, -m_wg)
summary(birth)
data <- birth
data$year <- as.factor(data$year)
data$sex <- data$sex - 1 # 1 is girl; 0 is boy
data$mrace <- as.factor(data$mrace)
data$m_edu <- as.factor(data$m_edu)
data$kotck <- as.factor(data$kotck)
data$parit_cat <- as.factor(data$parit_cat)
data$m_wg_cat <- as.factor(data$m_wg_cat)
data <- birth
data$year <- as.factor(data$year)
data$sex <- data$sex - 1 # 1 is girl; 0 is boy
data$mrace <- as.factor(data$mrace)
data$m_edu <- as.factor(data$m_edu)
data$kotck <- as.factor(data$kotck)
data$parit_cat <- as.factor(data$parit_cat)
data$m_wg_cat <- as.factor(data$m_wg_cat)
data$bc_3090d <- with(data, (bc_90d*90-bc_30d*30)/(90-30))
data$bc_90280d <- with(data, (bc_280d*280-bc_90d*90)/(280-90))
rm(list = ls())
gc()
library(dplyr)
library(data.table)
library(tableone)
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv",
drop = "V1")
birth$lbw <- 0
birth$lbw[birth$bwg<2500] <- 1
names(birth)
birth$firstborn <- birth$parit
#summary(birth$parit[birth$parit>7 & birth$parit<200])
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat <- as.factor(birth$parit_cat)
birth$firstborn[birth$parit>1 & !is.na(birth$parit)] <- 0
# birth$m_wg %>% sort(decreasing = TRUE) %>% head(100)
# summary(birth$parit_cat)
birth$m_wg_cat <- 0
birth$m_wg_cat[birth$m_wg<0] <- 1
birth$m_wg_cat[birth$m_wg>=0 & birth$m_wg<15] <- 2
birth$m_wg_cat[birth$m_wg>=15 & birth$m_wg<25] <- 3
birth$m_wg_cat[birth$m_wg>=25 & birth$m_wg<36] <- 4
birth$m_wg_cat[birth$m_wg>=36] <- 5
# summary(birth$m_wg_cat)
birth <- birth %>% select(-parit, -m_wg)
summary(birth)
data <- birth
data$year <- as.factor(data$year)
data$sex <- data$sex - 1 # 1 is girl; 0 is boy
data$mrace <- as.factor(data$mrace)
data$m_edu <- as.factor(data$m_edu)
data$kotck <- as.factor(data$kotck)
data$m_wg_cat <- as.factor(data$m_wg_cat)
data$bc_3090d <- with(data, (bc_90d*90-bc_30d*30)/(90-30))
data$bc_90280d <- with(data, (bc_280d*280-bc_90d*90)/(280-90))
#Table 1
listVars <- c("bwg","bc_30d",
"bc_90d","bc_280d",
"bc_3090d", "bc_90280d",
"year",
"mage","sex","married", "mrace","m_edu", "pncgov",
"mhincome", "mhvalue", "percentPoverty",
"cigdpp","cigddp","clinega", "firstborn", "kotck", "m_wg_cat",
"rf_db_gest", "rf_db_other", "rf_hbp_pregn", "rf_hbp_chronic",
"rf_cervix", "rf_prev_4kg", "rf_prev_sga",
)
#Table 1
listVars <- c("bwg","bc_30d",
"bc_90d","bc_280d",
"bc_3090d", "bc_90280d",
"year",
"mage","sex","married", "mrace","m_edu", "pncgov",
"mhincome", "mhvalue", "percentPoverty",
"cigdpp","cigddp","clinega", "firstborn", "kotck", "m_wg_cat",
"rf_db_gest", "rf_db_other", "rf_hbp_pregn", "rf_hbp_chronic",
"rf_cervix", "rf_prev_4kg", "rf_prev_sga"
)
catVars <- c("year","sex","married","mrace","m_edu","pncgov","firstborn",
"kotck", "m_wg_cat", "rf_db_gest", "rf_db_other", "rf_hbp_pregn", "rf_hbp_chronic",
"rf_cervix", "rf_prev_4kg", "rf_prev_sga")
table1 <- CreateTableOne(vars = listVars, data = data, factorVars = catVars)
table1 <- print(table1)
?CreateTableOne
table1 <- CreateTableOne(vars = listVars, data = data, factorVars = catVars,
strata = lbw)
table1 <- CreateTableOne(vars = listVars, data = data, factorVars = catVars,
strata = "lbw")
table1 <- print(table1)
table1 <- CreateTableOne(vars = listVars, factorVars = catVars,
strata = "lbw", addOverall = FALSE,
data = data)
table1 <- print(table1)
table1 <- CreateTableOne(vars = listVars, factorVars = catVars,
strata = "lbw", addOverall = TRUE,
data = data)
table1 <- print(table1)
rtffile <- RTF("table1.doc")  # this can be an .rtf or a .doc
rtffile <- RTF("table1.doc")  # this can be an .rtf or a .doc
library(rtf)
rtffile <- RTF("table1.doc")  # this can be an .rtf or a .doc
addParagraph(rtffile, "Table1")
addTable(rtffile, cbind(rownames(table1), table1))
done(rtffile)
rm(list = ls())
gc()
library(dplyr)
library(data.table)
library(tableone)
library(rtf)
birth <- fread("/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv",
drop = "V1")
birth$lbw <- 0
birth$lbw[birth$bwg<2500] <- 1
names(birth)
birth$firstborn <- birth$parit
#summary(birth$parit[birth$parit>7 & birth$parit<200])
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat[birth$parit>7 & birth$parit<200 & !is.na(birth$parit)] <- 7
#birth$parit_cat <- as.factor(birth$parit_cat)
birth$firstborn[birth$parit>1 & !is.na(birth$parit)] <- 0
# birth$m_wg %>% sort(decreasing = TRUE) %>% head(100)
# summary(birth$parit_cat)
birth$m_wg_cat <- 0
birth$m_wg_cat[birth$m_wg<0] <- 1
birth$m_wg_cat[birth$m_wg>=0 & birth$m_wg<15] <- 2
birth$m_wg_cat[birth$m_wg>=15 & birth$m_wg<25] <- 3
birth$m_wg_cat[birth$m_wg>=25 & birth$m_wg<36] <- 4
birth$m_wg_cat[birth$m_wg>=36] <- 5
# summary(birth$m_wg_cat)
birth <- birth %>% select(-parit, -m_wg)
summary(birth)
data <- birth
data$year <- as.factor(data$year)
data$sex <- data$sex - 1 # 1 is girl; 0 is boy
data$mrace <- as.factor(data$mrace)
data$m_edu <- as.factor(data$m_edu)
data$kotck <- as.factor(data$kotck)
data$m_wg_cat <- as.factor(data$m_wg_cat)
data$bc_3090d <- with(data, (bc_90d*90-bc_30d*30)/(90-30))
data$bc_90280d <- with(data, (bc_280d*280-bc_90d*90)/(280-90))
#Table 1
listVars <- c("bwg","bc_30d",
"bc_90d","bc_280d",
"bc_3090d", "bc_90280d",
"year",
"mage","sex","married", "mrace","m_edu", "pncgov",
"mhincome", "mhvalue", "percentPoverty",
"cigdpp","cigddp","clinega", "firstborn", "kotck", "m_wg_cat",
"rf_db_gest", "rf_db_other", "rf_hbp_pregn", "rf_hbp_chronic",
"rf_cervix", "rf_prev_4kg", "rf_prev_sga")
catVars <- c("year","sex","married","mrace","m_edu","pncgov","firstborn",
"kotck", "m_wg_cat", "rf_db_gest", "rf_db_other", "rf_hbp_pregn", "rf_hbp_chronic",
"rf_cervix", "rf_prev_4kg", "rf_prev_sga")
table1 <- CreateTableOne(vars = listVars, factorVars = catVars,
strata = "lbw", addOverall = TRUE, test = FALSE,
data = data)
table1 <- print(table1)
rtffile <- RTF("table1.doc")  # this can be an .rtf or a .doc
addParagraph(rtffile, "Table1")
addTable(rtffile, cbind(rownames(table1), table1))
done(rtffile)
# table1(~ bwg+
#           bc_30d+bc_90d+bc_280d+
#           mage+cigdpp+cigddp+clinega+med_hs_inc+
#           sex+married+mrace+m_edu+kotck+parit_cat+m_wg_cat+
#           rf_db_gest+rf_db_other+rf_hbp_pregn+rf_hbp_chronic+rf_cervix+rf_prev_4kg+rf_prev_sga+pncgov | lbw,
#         data=data)
attach(data)
par(mfrow=c(2,3))
plot(year, main="year")
plot(mrace, main="mrace")
plot(m_edu, main="m_edu")
plot(kotck, main="kotck")
plot(m_wg_cat, main="maternal weight change")
par(mfrow=c(2,2))
hist(bwg)
hist(bc_30d)
hist(bc_90d)
hist(bc_280d)
attach(data)
par(mfrow=c(2,3))
plot(year, main="year")
plot(mrace, main="mrace")
plot(m_edu, main="m_edu")
plot(kotck, main="kotck")
plot(m_wg_cat, main="maternal weight change")
par(mfrow=c(3,2))
hist(bwg)
hist(bc_30d)
hist(bc_90d)
hist(bc_280d)
hist(bc_3090d)
hist(bc_90280d)
par(mfrow=c(1,2))
plot(density(mage,  bw=2), main = "mage")
hist(clinega)
# cigdpp %>% sort(decreasing = TRUE) %>% head(30)
par(mfrow=c(2,2))
plot(density(cigdpp,  bw=0.5))
hist(log(cigdpp))
plot(density(log(cigdpp),  bw=0.5))
summary(cigdpp)
par(mfrow=c(2,2))
plot(density(cigddp,  bw=0.5))
hist(log(cigddp))
plot(density(log(cigddp),  bw=0.5))
summary(cigddp)
# med_hs_inc %>% sort(decreasing = TRUE) %>% head(30)
par(mfrow=c(2,2))
plot(density(med_hs_inc, bw=1))
plot(density(mhincome, bw=1))
hist(log(mhincome))
plot(density(log(mhincome),  bw=0.5))
data$log_mhincome <- log(birth$mhincome)
summary(mhincome)
par(mfrow=c(2,2))
plot(density(mhincome, bw=1))
hist(log(mhincome))
plot(density(log(mhincome),  bw=0.5))
data$log_mhincome <- log(birth$mhincome)
summary(mhincome)
par(mfrow=c(2,2))
plot(density(mhvalue, bw=1))
hist(log(mhvalue))
plot(density(log(mhvalue),  bw=0.5))
data$log_mhvalue <- log(birth$mhvalue)
summary(mhvalue)
plot(density(percentPoverty, bw=1))
hist(log(percentPoverty))
plot(density(percentPoverty, bw=1))
hist(log(percentPoverty))
plot(density(log(percentPoverty),  bw=0.5))
summary(percentPoverty)
attach(data)
par(mfrow=c(2,3))
plot(year, main="year")
plot(mrace, main="mrace")
plot(m_edu, main="m_edu")
plot(kotck, main="kotck")
plot(m_wg_cat, main="maternal weight change")
par(mfrow=c(3,2))
hist(bwg)
hist(bc_30d)
hist(bc_90d)
hist(bc_280d)
hist(bc_3090d)
hist(bc_90280d)
par(mfrow=c(1,2))
plot(density(mage,  bw=2), main = "mage")
hist(clinega)
# cigdpp %>% sort(decreasing = TRUE) %>% head(30)
par(mfrow=c(2,2))
plot(density(cigdpp,  bw=0.5))
hist(log(cigdpp))
plot(density(log(cigdpp),  bw=0.5))
summary(cigdpp)
par(mfrow=c(2,2))
plot(density(cigddp,  bw=0.5))
hist(log(cigddp))
plot(density(log(cigddp),  bw=0.5))
summary(cigddp)
# med_hs_inc %>% sort(decreasing = TRUE) %>% head(30)
par(mfrow=c(2,2))
plot(density(mhincome, bw=1))
hist(log(mhincome))
plot(density(log(mhincome),  bw=0.5))
data$log_mhincome <- log(birth$mhincome)
summary(mhincome)
par(mfrow=c(2,2))
plot(density(mhvalue, bw=1))
hist(log(mhvalue))
plot(density(log(mhvalue),  bw=0.5))
data$log_mhvalue <- log(birth$mhvalue)
summary(mhvalue)
detach(data)
rm(list=ls())
gc()
library(tableone)
?tableone
