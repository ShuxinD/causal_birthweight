birth_0010
summary(birth_0010$year)
## median household income
mhincome00 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2000.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2000", "tract2000"))
## median household income
mhincome00 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2000.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
#select = c("mhincome", "GEO_ID"),
#col.names = c("mhincome2000", "tract2000"),
)
rm(birth_11)
rm(mhincome11)
rm(mhvalue11)
rm(poverty11)
## median household income
mhincome00 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2000.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GISJOIN"),
#col.names = c("mhincome2000", "tract2000"),
)
mhincome00
mhincome00[, geoid2000 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
mhincome00
mhincome00[, GISJOIN=NULL]
mhincome00[, .GISJOIN=NULL]
mhincome00[, .GISJOIN := NULL]
## median household income
mhincome00 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2000.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GISJOIN"),
#col.names = c("mhincome2000", "tract2000"),
)
mhincome00
mhincome00[, geoid2000 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
mhincome00
mhincome00[, .GISJOIN := NULL]
mhincome00[, GISJOIN := NULL]
mhincome00 <- na.omit(mhincome00)
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
#select = c("mhincome", "tract"),
#col.names = c("mhincome2010", "tract2010"),
)
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
#select = c("mhincome", "GEO_ID"),
#col.names = c("mhincome2010", "GEO_ID2010"),
)
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2010", "GEO_ID2010"),
)
summary(mhincome10)
mhincome10[, geoid2010 := substr(GEO_ID,10,20)]
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2010", "GEO_ID"),
)
summary(mhincome10)
mhincome10[, geoid2010 := substr(GEO_ID,10,20)]
mhincome10 <- mhincome10[nchar(mhincome10$geoid2010)==11]
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2010", "GEO_ID"),
)
summary(mhincome10)
mhincome10[, geoid2010 := substr(GEO_ID,10,20)]
mhincome10
mhincome10 <- mhincome10[nchar(mhincome10$geoid2010)==11]
mhvalue11 <- na.omit(mhvalue11)
mhincome10 <- na.omit(mhincome10)
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2010", "GEO_ID"),
)
summary(mhincome10)
mhincome10[, geoid2010 := substr(GEO_ID,10,20)]
mhincome10
mhincome10 <- mhincome10[nchar(mhincome10$geoid2010)==11]
mhincome10 <- na.omit(mhincome10)
## median value of houses
mhvalue00 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2000.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
#select = c("mhvalue", "tract"),
#col.names = c("mhvalue2000", "tract2000"),
)
## median value of houses
mhvalue00 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2000.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
select = c("mhvalue", "GISJOIN"),
col.names = c("mhvalue2000", "GISJOIN"),
)
summary(mhvalue00)
mhvalue00[, geoid2000 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
mhvalue00
mhvalue00[, GISJOIN := NULL]
mhincome10[, GEO_ID :=NULL]
mhincome10
mhvalue00
mhvalue00 <- na.omit(mhvalue00)
mhvalue10 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2010.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
#select = c("mhvalue", "tract"),
#col.names = c("mhvalue2010", "tract2010"),
)
mhvalue10 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2010.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
select = c("mhvalue", "GEO_ID"),
col.names = c("mhvalue2010", "GEO_ID"),
)
summary(mhvalue10)
mhvalue10$mhvalue2010
mhvalue10[mhvalue2010=="1,000,000+"]$mhvalue2010 <- NA
mhvalue10$mhvalue2010 <- as.numeric(mhvalue10$mhvalue2010)
mhvalue10[, geoid2010 := substr(GEO_ID,10,20)]
mhvalue10
mhvalue10 <- mhvalue10[nchar(mhvalue10$geoid2010)==11]
mhvalue10 <- na.omit(mhvalue10)
mhvalue10[, GEO_ID :=NULL]
mhincome10
mhvalue10
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,NA,NA,NA,NA, "character"),
#select = c("percentPoverty","tract"),
#col.names = c("percentPoverty00", "tract2000"),
)
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,NA,NA,NA,NA, "character"),
select = c("percentPoverty","areakey"),
col.names = c("percentPoverty00", "geoid2000"),
)
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,NA,NA,NA,NA, "character"),
#select = c("percentPoverty","areakey"),
#col.names = c("percentPoverty00", "geoid2000"),
)
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,"character",NA,NA,NA, "character"),
#select = c("percentPoverty","areakey"),
#col.names = c("percentPoverty00", "geoid2000"),
)
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,"character",NA,NA,NA, "character"),
select = c("percentPoverty","areakey"),
col.names = c("percentPoverty00", "geoid2000"),
)
summary(poverty00)
poverty00
poverty00 <- na.omit(poverty00)
poverty00
poverty10 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2010.csv"),
colClasses = c(NA,NA,NA,NA,NA,NA, "character"),
#select = c("percentPoverty","tract"),
#col.names = c("percentPoverty10", "tract2010"),
)
poverty10 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2010.csv"),
colClasses = c(NA,NA,NA,NA,NA,NA, "character"),
select = c("percentPoverty","GISJOIN"),
col.names = c("percentPoverty10", "GISJOIN"),
)
summary(poverty10)
summary(poverty10)
poverty10[, geoid2010 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
poverty10
poverty10[, GISJOIN := NULL]
poverty10 <- na.omit(poverty10)
poverty10
birth_0010 <- left_join(birth_0010, mhincome00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, mhvalue00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, poverty00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, mhincome10, by = "geoid2010")
birth_0010 <- left_join(birth_0010, mhvalue10, by = "geoid2010")
birth_0010 <- left_join(birth_0010, poverty10, by = "geoid2010")
birth_0010
birth_00 <- birth_0010[year==2000]
birth_00 <- birth_00[,.(uniqueid_yr,year,mhincome2000,mhvalue2000,percentPoverty00)]
############################# 0. Setup ########################################
rm(list = ls())
gc()
library(data.table)
library(dplyr)
dir_input_birth <- "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_geoid/"
dir_input_census <- "/Users/shuxind/Desktop/census/"
dir_output_birth <- "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/"
# dir_input <- "/nfs/home/S/shd968/shared_space/ci3_shd968_proj/"
# dir_output <- "/nfs/home/S/shd968/shared_space/ci3_shd968_proj/"
birth_0010 <- fread(paste0(dir_input_birth, "birth_w_geocode0010.csv"),
drop = c("V1", "long", "lat"),
colClasses = c(rep(NA, 5), rep("character",2)),
na.strings = "NA")
################## 4. Merge SES variables for 2000-2010#########################
birth_0010 <- birth_0010[year!=2012&year!=2011]
birth_0010
summary(birth_0010$year)
## median household income
mhincome00 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2000.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GISJOIN"),
col.names = c("mhincome2000", "GISJOIN"),
)
mhincome00
mhincome00[, geoid2000 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
mhincome00
mhincome00[, GISJOIN := NULL]
mhincome00 <- na.omit(mhincome00)
mhincome10 <- fread(paste0(dir_input_census,
"MedianHouseholdIncome_tract_MA_2000_2015/clean/",
"medianhouseholdincome_2010.csv"),
colClasses = c(NA,NA,NA,"numeric","character"),
select = c("mhincome", "GEO_ID"),
col.names = c("mhincome2010", "GEO_ID"),
)
summary(mhincome10)
mhincome10[, geoid2010 := substr(GEO_ID,10,20)]
mhincome10
mhincome10 <- mhincome10[nchar(mhincome10$geoid2010)==11]
mhincome10 <- na.omit(mhincome10)
mhincome10[, GEO_ID :=NULL]
mhincome10
## median value of houses
mhvalue00 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2000.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
select = c("mhvalue", "GISJOIN"),
col.names = c("mhvalue2000", "GISJOIN"),
)
summary(mhvalue00)
mhvalue00[, geoid2000 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
mhvalue00
mhvalue00[, GISJOIN := NULL]
mhvalue00 <- na.omit(mhvalue00)
mhvalue10 <- fread(paste0(dir_input_census,
"MedianValueofHouse_tract_2000_2015/clean/",
"medianvalueofhousevalue_2010.csv"),
colClasses = c(NA,NA,NA,NA,"character"),
select = c("mhvalue", "GEO_ID"),
col.names = c("mhvalue2010", "GEO_ID"),
)
summary(mhvalue10)
mhvalue10$mhvalue2010
mhvalue10[mhvalue2010=="1,000,000+"]$mhvalue2010 <- NA
mhvalue10$mhvalue2010 <- as.numeric(mhvalue10$mhvalue2010)
mhvalue10[, geoid2010 := substr(GEO_ID,10,20)]
mhvalue10
mhvalue10 <- mhvalue10[nchar(mhvalue10$geoid2010)==11]
mhvalue10 <- na.omit(mhvalue10)
mhvalue10[, GEO_ID :=NULL]
mhvalue10
## poverty
poverty00 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2000.csv"),
colClasses = c(NA,"character",NA,NA,NA, "character"),
select = c("percentPoverty","areakey"),
col.names = c("percentPoverty00", "geoid2000"),
)
summary(poverty00)
poverty00 <- na.omit(poverty00)
poverty00
poverty10 <- fread(paste0(dir_input_census,
"PercentbelowPoverty_tract_2000_2015/clean/",
"percentPovertypoverty_2010.csv"),
colClasses = c(NA,NA,NA,NA,NA,NA, "character"),
select = c("percentPoverty","GISJOIN"),
col.names = c("percentPoverty10", "GISJOIN"),
)
summary(poverty10)
poverty10[, geoid2010 := paste0(substr(GISJOIN,2,3),substr(GISJOIN,5,7),substr(GISJOIN,9,14))]
poverty10
poverty10[, GISJOIN := NULL]
poverty10 <- na.omit(poverty10)
poverty10
birth_0010 <- left_join(birth_0010, mhincome00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, mhvalue00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, poverty00, by = "geoid2000")
birth_0010 <- left_join(birth_0010, mhincome10, by = "geoid2010")
birth_0010 <- left_join(birth_0010, mhvalue10, by = "geoid2010")
birth_0010 <- left_join(birth_0010, poverty10, by = "geoid2010")
birth_0010
birth_00 <- birth_0010[year==2000]
birth_00 <- birth_00[,.(uniqueid_yr,year,mhincome2000,mhvalue2000,percentPoverty00)]
names(birth_00) <- c("uniqueid_yr","year","mhincome","mhvalue","percentPoverty")
write.csv(birth_00, file = paste0(dir_output_birth, "birth00_SES.csv"))
birth_10 <- birth_0010[year==2010]
birth_10 <- birth_10[,.(uniqueid_yr,year,mhincome2010,mhvalue2010,percentPoverty10)]
names(birth_10) <- c("uniqueid_yr","year","mhincome","mhvalue","percentPoverty")
write.csv(birth_10, file = paste0(dir_output_birth, "birth10_SES.csv"))
birth_0109 <- birth_0010[year!=2000&year!=2010]
birth_0109
birth_0109[,c("mhincome","mhvalue","percentPoverty") :=
list(mhincome = (mhincome2010-mhincome2000)/10*(year-2000)+mhincome2000,
mhvalue = (mhvalue2010-mhvalue2000)/10*(year-2000)+mhvalue2000,
percentPoverty = (percentPoverty10-percentPoverty00)/10*(year-2000)+percentPoverty00)]
birth0109_SES <- birth_0109[,.(uniqueid_yr,year,mhincome,mhvalue,percentPoverty)]
write.csv(birth0109_SES, file = paste0(dir_output_birth, "birth0109_SES.csv"))
######################### 5. Merge with birth data #############################
rm(list = ls())
gc()
# birth <- fread(file = "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv")
birth00 <- fread(file = paste0(dir_output_birth, "birth00_SES.csv"),
drop = "V1")
############################# 0. Setup ########################################
rm(list = ls())
gc()
library(data.table)
library(dplyr)
dir_input_birth <- "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_geoid/"
dir_input_census <- "/Users/shuxind/Desktop/census/"
dir_output_birth <- "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/"
# dir_input <- "/nfs/home/S/shd968/shared_space/ci3_shd968_proj/"
# dir_output <- "/nfs/home/S/shd968/shared_space/ci3_shd968_proj/"
######################### 5. Merge with birth data #############################
# birth <- fread(file = "/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv")
birth00 <- fread(file = paste0(dir_output_birth, "birth00_SES.csv"),
drop = "V1")
birth0109 <- fread(file = paste0(dir_output_birth, "birth0109_SES.csv"),
drop = "V1")
birth10 <- fread(file = paste0(dir_output_birth, "birth10_SES.csv"),
drop = "V1",
colClasses = c(NA, "character", rep(NA,4)))
birth11 <- fread(file = paste0(dir_output_birth, "birth11_SES.csv"),
colClasses = c(NA, "character", rep(NA,4)),
drop = "V1")
birth12 <- fread(file = paste0(dir_output_birth, "birth12_SES.csv"),
colClasses = c(NA, "character", rep(NA,4)),
drop = "V1")
birth13 <- fread(file = paste0(dir_output_birth, "birth13_SES.csv"),
colClasses = c(NA, "character", rep(NA,4)),
drop = "V1")
birth14 <- fread(file = paste0(dir_output_birth, "birth14_SES.csv"),
colClasses = c(NA, "character", rep(NA,4)),
drop = "V1")
birth15 <- fread(file = paste0(dir_output_birth, "birth15_SES.csv"),
colClasses = c(NA, "character", rep(NA,4)),
drop = "V1")
birth_SES <- rbind(birth00, birth0109, birth10, birth11, birth12, birth13, birth14, birth15)
write.csv(birth_SES, file = paste0(dir_output_birth, "birth_SES.csv"))
rm(list = ls())
gc()
library(dplyr)
library(data.table)
birth0 <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv", header = TRUE)
dim(birth0)
summary(as.factor(birth0$year))
birth0 <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv", header = TRUE)
dim(birth0)
birth0 <- birth0 %>% filter(!year==2000)
dim(birth0)
SES <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/birth_SES.csv",
drop = c("V1","year"))
dim(SES)
birthSES <- left_join(birth0, SES, by = "uniqueid_yr")
SES <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/birth_SES.csv",
drop = c("V1","year"))
dim(SES)
birthSES <- left_join(birth0, SES, by = "uniqueid_yr")
remove(SES)
dim(birthSES)
remove(birth0)
print("SES variable dimension",dim(SES))
print("SES variable dimension", dim(SES))
SES <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/birth_SES.csv",
drop = c("V1","year"))
print("SES variable dimension", dim(SES))
print(paste0"SES variable dimension", dim(SES)))
print(paste0("SES variable dimension", dim(SES)))
print(paste("SES variable dimension", dim(SES)))
print(paste("SES variable dimension", dim(SES)[1]))
rm(list = ls())
gc()
library(dplyr)
library(data.table)
birth0 <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv", header = TRUE)
print("dimension of original birth data")
dim(birth0)
birth0 <- birth0 %>% filter(!year==2000)
print("dimension after omitting 2000 born babies")
dim(birth0)
SES <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/birth_SES.csv",
drop = c("V1","year"))
print("SES variable dimension")
dim(SES)
birthSES <- left_join(birth0, SES, by = "uniqueid_yr")
remove(SES)
print("dimension of birth data with SES info")
dim(birthSES)
remove(birth0)
bc <- readRDS("/Users/dongshuxin/Desktop/data/bc_mean.rds")
bc <- readRDS("/Users/shuxind/Desktop/BC_birthweight_data/bc_mean.rds")
birthBC <- left_join(birthSES, bc, by = "uniqueid_yr")
remove(bc)
birth <- birthBC # create a copy
print("study population")
dim(birth)[1]
rm(list = ls())
gc()
library(dplyr)
library(data.table)
birth0 <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_02Nov18/mabirths_02NOV18.csv", header = TRUE)
print("dimension of original birth data")
dim(birth0)
birth0 <- birth0 %>% filter(!year==2000)
print("dimension after omitting 2000 born babies")
dim(birth0)
SES <- fread("/Users/shuxind/Desktop/BC_birthweight_data/MAbirth_w_SES/birth_SES.csv",
drop = c("V1","year"))
print("SES variable dimension")
dim(SES)
birthSES <- left_join(birth0, SES, by = "uniqueid_yr")
remove(SES)
print("dimension of birth data with SES info")
dim(birthSES)
remove(birth0)
bc <- readRDS("/Users/shuxind/Desktop/BC_birthweight_data/bc_mean.rds")
birthBC <- left_join(birthSES, bc, by = "uniqueid_yr")
remove(bc)
remove(birthSES)
birth <- birthBC # create a copy
print("study population")
dim(birth)[1]
birth$mrace[birth$mrace==6] <- NA
birth$kotck[birth$kotck==0] <- NA
birth <- birth %>% filter(!is.na(bc_30d) & !is.na(bc_90d) & !is.na(bc_280d)) # exclude those with missing average exposure
print(paste("Number of observation with complete exposure history", dim(birth)[1])) # number of exclusion
birth <- birth %>% filter(plurality==1 & baby_alive==1)
birth <- birth %>% filter(bwg>=500 & bwg<=6000)
birth <- birth %>% filter(clinega>=37 & clinega<=42)
print(paste("2st: Number of observation after inclusion and exclusion", dim(birth)[1]))
names(birth)
birth <- birth %>% select(-fage, - frace, -long, -lat, -date1prenat_vis, -BLOCK10, -tract)
birth <- birth %>% select(-apgar1, -apgar5, -jaund, -lbnl, -lbnd)
birth <- birth %>% select(-plurality, -baby_alive)
birth <- birth %>% select(-kess, -bdob, -date_last_menses, -gacalc)
# drop some risk factors
birth <- birth %>% select(-rf_lung, -rf_anem, -rf_card, -rf_prev_bd, -rf_renal,-rf_rh_sens, -rf_sickle, -rf_ut_bld, -modvag, -modfor, -modvac, -modpcs, -modrcs, -modvbac)
birth <- birth %>% select(-gravid)
summary(birth)
mod1 <- lm(bwg ~ ., data = subset(birth, select = -c(uniqueid_yr, tract, bc_30d, bc_90d, bc_280d)))
summary(birth)
mod1 <- lm(bwg ~ ., data = subset(birth, select = -c(uniqueid_yr, bc_30d, bc_90d, bc_280d)))
summary(mod1)
# library(questionr)
# freq.na(birth[,-1])
library(questionr)
install.packages("questionr")
library(questionr)
freq.na(birth[,-1])
summary(birth)
mod1 <- lm(bwg ~ ., data = subset(birth, select = -c(uniqueid_yr, bc_30d, bc_90d, bc_280d)))
summary(mod1)
library(questionr)
freq.na(birth[,-1])
birth_complt <- birth %>% na.omit()
write.csv(birth_complt, file = "/Users/shuxind/Desktop/BC_birthweight_data/birth_complt.csv")
print(paste("Final Sample Size is", dim(birth_complt)[1]))
